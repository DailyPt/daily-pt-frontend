{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import AsyncStorage from'@react-native-async-storage/async-storage';import{createContext,useState}from'react';import{checkIsLogged}from\"../api/checkIsLogged\";import{jsx as _jsx}from\"react/jsx-runtime\";export var AuthContext=createContext({token:'',isProfileLogged:false,isAuthenticated:false,authenticate:function authenticate(){},signOut:function signOut(){}});var AuthContextProvider=function AuthContextProvider(_ref){var children=_ref.children;var _useState=useState(),_useState2=_slicedToArray(_useState,2),authToken=_useState2[0],setAuthToken=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),isLogged=_useState4[0],setIsLogged=_useState4[1];var authenticate=function(){var _ref2=_asyncToGenerator(function*(token){setAuthToken(token);setIsLogged(yield checkIsLogged(token));AsyncStorage.setItem('token',token);});return function authenticate(_x){return _ref2.apply(this,arguments);};}();var signOut=function signOut(){setAuthToken(null);setIsLogged(false);AsyncStorage.removeItem('token');};var value={token:authToken,isProfileLogged:isLogged,isAuthenticated:!!authToken,authenticate:authenticate,signOut:signOut};return _jsx(AuthContext.Provider,{value:value,children:children});};export default AuthContextProvider;","map":{"version":3,"names":["AsyncStorage","createContext","useState","checkIsLogged","jsx","_jsx","AuthContext","token","isProfileLogged","isAuthenticated","authenticate","signOut","AuthContextProvider","_ref","children","_useState","_useState2","_slicedToArray","authToken","setAuthToken","_useState3","_useState4","isLogged","setIsLogged","_ref2","_asyncToGenerator","setItem","_x","apply","arguments","removeItem","value","Provider"],"sources":["/Users/jinwook/react-native/daily-pt-frontend/src/store/auth-context.js"],"sourcesContent":["/* eslint-disable react/prop-types */\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { createContext, useState } from 'react';\nimport { checkIsLogged } from '../api/checkIsLogged';\n\nexport const AuthContext = createContext({\n  token: '',\n  isProfileLogged: false,\n  isAuthenticated: false,\n  authenticate: () => {},\n  signOut: () => {},\n});\n\nconst AuthContextProvider = ({ children }) => {\n  const [authToken, setAuthToken] = useState();\n  const [isLogged, setIsLogged] = useState();\n\n  const authenticate = async (token) => {\n    setAuthToken(token);\n    setIsLogged(await checkIsLogged(token));\n\n    AsyncStorage.setItem('token', token);\n  };\n\n  const signOut = () => {\n    setAuthToken(null);\n    setIsLogged(false);\n    AsyncStorage.removeItem('token');\n  };\n\n  const value = {\n    token: authToken,\n    isProfileLogged: isLogged,\n    isAuthenticated: !!authToken,\n    authenticate: authenticate,\n    signOut: signOut,\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};\n\nexport default AuthContextProvider;\n"],"mappings":"wIACA,MAAO,CAAAA,YAAY,KAAM,2CAA2C,CACpE,OAASC,aAAa,CAAEC,QAAQ,KAAQ,OAAO,CAC/C,OAASC,aAAa,4BAA+B,OAAAC,GAAA,IAAAC,IAAA,yBAErD,MAAO,IAAM,CAAAC,WAAW,CAAGL,aAAa,CAAC,CACvCM,KAAK,CAAE,EAAE,CACTC,eAAe,CAAE,KAAK,CACtBC,eAAe,CAAE,KAAK,CACtBC,YAAY,CAAE,SAAAA,aAAA,CAAM,CAAC,CAAC,CACtBC,OAAO,CAAE,SAAAA,QAAA,CAAM,CAAC,CAClB,CAAC,CAAC,CAEF,GAAM,CAAAC,mBAAmB,CAAG,QAAtB,CAAAA,mBAAmBA,CAAAC,IAAA,CAAqB,IAAf,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CACrC,IAAAC,SAAA,CAAkCb,QAAQ,EAAE,CAAAc,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAArCG,SAAS,CAAAF,UAAA,IAAEG,YAAY,CAAAH,UAAA,IAC9B,IAAAI,UAAA,CAAgClB,QAAQ,EAAE,CAAAmB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAnCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAE5B,GAAM,CAAAX,YAAY,gBAAAc,KAAA,CAAAC,iBAAA,CAAG,UAAOlB,KAAK,CAAK,CACpCY,YAAY,CAACZ,KAAK,CAAC,CACnBgB,WAAW,MAAO,CAAApB,aAAa,CAACI,KAAK,CAAC,CAAC,CAEvCP,YAAY,CAAC0B,OAAO,CAAC,OAAO,CAAEnB,KAAK,CAAC,CACtC,CAAC,iBALK,CAAAG,YAAYA,CAAAiB,EAAA,SAAAH,KAAA,CAAAI,KAAA,MAAAC,SAAA,OAKjB,CAED,GAAM,CAAAlB,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAA,CAAS,CACpBQ,YAAY,CAAC,IAAI,CAAC,CAClBI,WAAW,CAAC,KAAK,CAAC,CAClBvB,YAAY,CAAC8B,UAAU,CAAC,OAAO,CAAC,CAClC,CAAC,CAED,GAAM,CAAAC,KAAK,CAAG,CACZxB,KAAK,CAAEW,SAAS,CAChBV,eAAe,CAAEc,QAAQ,CACzBb,eAAe,CAAE,CAAC,CAACS,SAAS,CAC5BR,YAAY,CAAEA,YAAY,CAC1BC,OAAO,CAAEA,OACX,CAAC,CAED,MAAO,CAAAN,IAAA,CAACC,WAAW,CAAC0B,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAAjB,QAAA,CAAEA,QAAQ,EAAwB,CAC9E,CAAC,CAED,cAAe,CAAAF,mBAAmB"},"metadata":{},"sourceType":"module","externalDependencies":[]}