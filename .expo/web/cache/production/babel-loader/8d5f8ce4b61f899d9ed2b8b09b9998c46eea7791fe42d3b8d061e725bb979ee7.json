{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import axios from'axios';var FB_API_KEY='AIzaSyBwrN_vifw37waZ8PH5knP92IVLzD7PDms';function refreshAuthToken(_x){return _refreshAuthToken.apply(this,arguments);}function _refreshAuthToken(){_refreshAuthToken=_asyncToGenerator(function*(refreshToken){var url=\"https://securetoken.googleapis.com/v1/token?key=\"+FB_API_KEY;var response=yield axios.post(url,{grant_type:'refresh_token',refresh_token:refreshToken},{headers:{'Content-Type':\"application/x-www-form-urlencoded\"}});var token=response.data.id_token;return token;});return _refreshAuthToken.apply(this,arguments);}export function authenticate(_x2,_x3,_x4){return _authenticate.apply(this,arguments);}function _authenticate(){_authenticate=_asyncToGenerator(function*(mode,email,password){var url=\"https://identitytoolkit.googleapis.com/v1/accounts:\"+mode+\"?key=\"+FB_API_KEY;var response=yield axios.post(url,{email:email,password:password,returnSecureToken:true});var token=response.data.idToken;var refreshToken=response.data.refreshToken;var expiresIn=response.data.expiresIn;var currentTime=Math.floor(Date.now()/1000);if(expiresIn&&expiresIn<currentTime){token=yield refreshAuthToken(refreshToken);}return token;});return _authenticate.apply(this,arguments);}export function createUser(email,password){return authenticate('signUp',email,password);}export function signIn(email,password){return authenticate('signInWithPassword',email,password);}","map":{"version":3,"names":["axios","FB_API_KEY","refreshAuthToken","_x","_refreshAuthToken","apply","arguments","_asyncToGenerator","refreshToken","url","response","post","grant_type","refresh_token","headers","token","data","id_token","authenticate","_x2","_x3","_x4","_authenticate","mode","email","password","returnSecureToken","idToken","expiresIn","currentTime","Math","floor","Date","now","createUser","signIn"],"sources":["/Users/jinwook/react-native/daily-pt-frontend/src/api/auth.js"],"sourcesContent":["import axios from 'axios';\n\nconst FB_API_KEY = 'AIzaSyBwrN_vifw37waZ8PH5knP92IVLzD7PDms'; // 환경변수로 숨기기\n\nasync function refreshAuthToken(refreshToken) {\n  const url = `https://securetoken.googleapis.com/v1/token?key=${FB_API_KEY}`;\n\n  const response = await axios.post(\n    url,\n    {\n      grant_type: 'refresh_token',\n      refresh_token: refreshToken,\n    },\n    {\n      headers: {\n        'Content-Type': `application/x-www-form-urlencoded`,\n      },\n    }\n  );\n\n  const token = response.data.id_token;\n\n  return token;\n}\n\nexport async function authenticate(mode, email, password) {\n  const url = `https://identitytoolkit.googleapis.com/v1/accounts:${mode}?key=${FB_API_KEY}`;\n\n  const response = await axios.post(url, {\n    email: email,\n    password: password,\n    returnSecureToken: true,\n  });\n\n  let token = response.data.idToken;\n  const refreshToken = response.data.refreshToken;\n  const expiresIn = response.data.expiresIn;\n\n  const currentTime = Math.floor(Date.now() / 1000);\n  if (expiresIn && expiresIn < currentTime) {\n    token = await refreshAuthToken(refreshToken);\n  }\n\n  return token;\n}\n\nexport function createUser(email, password) {\n  return authenticate('signUp', email, password);\n}\n\nexport function signIn(email, password) {\n  return authenticate('signInWithPassword', email, password);\n}\n"],"mappings":"uEAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,GAAM,CAAAC,UAAU,CAAG,yCAAyC,CAAC,QAE9C,CAAAC,gBAAgBA,CAAAC,EAAA,SAAAC,iBAAA,CAAAC,KAAA,MAAAC,SAAA,YAAAF,kBAAA,EAAAA,iBAAA,CAAAG,iBAAA,CAA/B,UAAgCC,YAAY,CAAE,CAC5C,GAAM,CAAAC,GAAG,oDAAsDR,UAAY,CAE3E,GAAM,CAAAS,QAAQ,MAAS,CAAAV,KAAK,CAACW,IAAI,CAC/BF,GAAG,CACH,CACEG,UAAU,CAAE,eAAe,CAC3BC,aAAa,CAAEL,YACjB,CAAC,CACD,CACEM,OAAO,CAAE,CACP,cAAc,oCAChB,CACF,CAAC,CACF,CAED,GAAM,CAAAC,KAAK,CAAGL,QAAQ,CAACM,IAAI,CAACC,QAAQ,CAEpC,MAAO,CAAAF,KAAK,CACd,CAAC,SAAAX,iBAAA,CAAAC,KAAA,MAAAC,SAAA,GAED,eAAsB,CAAAY,YAAYA,CAAAC,GAAA,CAAAC,GAAA,CAAAC,GAAA,SAAAC,aAAA,CAAAjB,KAAA,MAAAC,SAAA,GAmBjC,SAAAgB,cAAA,EAAAA,aAAA,CAAAf,iBAAA,CAnBM,UAA4BgB,IAAI,CAAEC,KAAK,CAAEC,QAAQ,CAAE,CACxD,GAAM,CAAAhB,GAAG,uDAAyDc,IAAI,SAAQtB,UAAY,CAE1F,GAAM,CAAAS,QAAQ,MAAS,CAAAV,KAAK,CAACW,IAAI,CAACF,GAAG,CAAE,CACrCe,KAAK,CAAEA,KAAK,CACZC,QAAQ,CAAEA,QAAQ,CAClBC,iBAAiB,CAAE,IACrB,CAAC,CAAC,CAEF,GAAI,CAAAX,KAAK,CAAGL,QAAQ,CAACM,IAAI,CAACW,OAAO,CACjC,GAAM,CAAAnB,YAAY,CAAGE,QAAQ,CAACM,IAAI,CAACR,YAAY,CAC/C,GAAM,CAAAoB,SAAS,CAAGlB,QAAQ,CAACM,IAAI,CAACY,SAAS,CAEzC,GAAM,CAAAC,WAAW,CAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACC,GAAG,EAAE,CAAG,IAAI,CAAC,CACjD,GAAIL,SAAS,EAAIA,SAAS,CAAGC,WAAW,CAAE,CACxCd,KAAK,MAAS,CAAAb,gBAAgB,CAACM,YAAY,CAAC,CAC9C,CAEA,MAAO,CAAAO,KAAK,CACd,CAAC,SAAAO,aAAA,CAAAjB,KAAA,MAAAC,SAAA,GAED,MAAO,SAAS,CAAA4B,UAAUA,CAACV,KAAK,CAAEC,QAAQ,CAAE,CAC1C,MAAO,CAAAP,YAAY,CAAC,QAAQ,CAAEM,KAAK,CAAEC,QAAQ,CAAC,CAChD,CAEA,MAAO,SAAS,CAAAU,MAAMA,CAACX,KAAK,CAAEC,QAAQ,CAAE,CACtC,MAAO,CAAAP,YAAY,CAAC,oBAAoB,CAAEM,KAAK,CAAEC,QAAQ,CAAC,CAC5D"},"metadata":{},"sourceType":"module","externalDependencies":[]}